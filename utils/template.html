<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta http-equiv="X-Content-Type-Options" content="nosniff"/>
    <meta content="width=device-width,initial-scale=1.0" name="viewport">
    <title>Summary of AWS Compliance Statuses</title>
    <!-- Load required Bootstrap and BootstrapVue CSS -->
    <link type="text/css" rel="stylesheet" href="https://unpkg.com/bootstrap/dist/css/bootstrap.min.css" />
    <link type="text/css" rel="stylesheet" href="https://unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.css" />

    <!-- Load polyfills to support older browsers -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es2015%2CIntersectionObserver" crossorigin="anonymous"></script>

    <!-- Load required Bootstrap and BootstrapVue CSS -->
    <link crossorigin="anonymous" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
          integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" rel="stylesheet">

    <link crossorigin="anonymous"
          href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-vue/2.16.0/bootstrap-vue.min.css"
          rel="stylesheet"
          type="text/css"/>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script crossorigin="anonymous" src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.12/vue.min.js"></script>
    <script crossorigin="anonymous"
            src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-vue/2.16.0/bootstrap-vue.min.js"></script>

    <!-- JQuery-->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script>
        var isLocalExample;
        var report_generated_time;
        var version;
        var report_data;

        isLocalExample = false;
        report_generated_time = "{{ t.report_generated_time }}";
        version = "{{ t.version }}";

        // The report_data goes right here.
        {{ t.results }}

    </script>
</head>
<body>
<div id="app">
    <!--Navigation bar-->
<!--    <b-navbar toggleable="md" variant="faded">-->
<!--        <b-navbar-brand @click="activeSection = 0" href="#">-->
<!--            AWS AllowLister-->
<!--        </b-navbar-brand>-->
<!--        <b-navbar-toggle target="nav-collapse"></b-navbar-toggle>-->

<!--        <b-collapse id="nav-collapse" is-nav>-->
<!--            <b-navbar-nav>-->
<!--                <b-nav-item-->
<!--                    :active="activeSection === 'summary'"-->
<!--                    @click="activeSection = 0"-->
<!--                    href="#">Summary-->
<!--                </b-nav-item>-->
<!--            </b-navbar-nav>-->
<!--        </b-collapse>-->
<!--    </b-navbar>-->

    <!--Content and Components-->
<!--    <b-container class="mt-3 pb-3 report">-->
<!--        <b-tabs v-model="activeSection" nav-class="d-none">-->
<!--            <b-tab key="summary">-->
<!--    <br>-->
    <br>
    <h1>AWS Compliance Statuses</h1>
    <template v-bind:id="'table-report'">
        <!--                <b-container v-bind:id="'table-report'">-->
        <!-- User Interface controls -->
        <b-row>
            <b-col></b-col>
            <b-col></b-col>
            <b-col>
                <b-form-group
                        class="mb-0"
                        label="Per page"
                        label-align-sm="right"
                        label-cols-lg="3"
                        label-cols-md="4"
                        label-cols-sm="6"
                        label-for="perPageSelect"
                        label-size="sm"
                >
                    <b-form-select
                            :options="pageOptions"
                            id="perPageSelect"
                            size="sm"
                            v-model="perPage"
                    ></b-form-select>
                </b-form-group>
            </b-col>

        </b-row>
        <b-table
                :current-page="currentPage"
                :fields="fields"
                :items="filtered"
                :per-page="perPage"
                :sort-desc.sync="sortDesc"
                responsive="sm"
                small
        >
            <template slot="top-row" slot-scope="{ fields }">
                <td :key="field.key" v-for="field in fields">
                    <input :placeholder="field.label" v-model="filters[field.key]">
                </td>
            </template>
        </b-table>
    </template>

    <!--            </b-tab>-->
    <!--        </b-tabs>-->
    </template>

    <!--Footer-->
    <!--    <b-container>-->
    <!--        <b-row class="mt-5">-->
    <!--            <b-col class="text-center text-muted">-->
    <!--                Report Generated: {{ report_generated_time }} &diamond;-->
    <!--                Version:-->
    <!--                <b-link href="https://github.com/salesforce/aws-allowlister">{{ version }}</b-link>-->
    <!--            </b-col>-->
    <!--        </b-row>-->
    <!--    </b-container>-->
</div>

<script type="text/javascript">

    var app = new Vue({
        name: "App",
        el: '#app',
        data() {
            return {
                sortDesc: false,
                totalRows: 1,
                currentPage: 1,
                perPage: 300,
                pageOptions: [100, 200, 300],
                fields: [
                    {key: 'service_prefix', sortable: true},
                    {key: 'name', sortable: true},
                    {key: 'SOC', sortable: true},
                    {key: 'ISO', sortable: true},
                    {key: 'PCI', sortable: true},
                    {key: 'HIPAA', sortable: true},
                    {key: 'FedRAMP_Moderate', sortable: true},
                    {key: 'FedRAMP_High', sortable: true},
                    {key: 'DoDCCSRG_IL2_GC', sortable: true},
                    {key: 'DoDCCSRG_IL2_EW', sortable: true},
                    {key: 'DoDCCSRG_IL4_GC', sortable: true},
                    {key: 'DoDCCSRG_IL5_GC', sortable: true},
                    // TODO: This is where you insert new fields
                ],
                activeSection: 0,
                // eslint-disable-next-line no-undef
                report_data: report_data,
                // eslint-disable-next-line no-undef
                report_generated_time: report_generated_time,
                // eslint-disable-next-line no-undef
                version: version,
                filters: {
                    service_prefix: '',
                    name: '',
                    SOC: '',
                    PCI: '',
                    ISO: '',
                    HIPAA: '',
                    FedRAMP_Moderate: '',
                    FedRAMP_High: '',
                },
            }
        },
        computed: {
            filtered() {
                const filtered = this.report_data.filter(item => {
                    return Object.keys(this.filters).every(key =>
                        String(item[key]).includes(this.filters[key]))
                })
                return filtered.length > 0 ? filtered : [{
                    service_prefix: '',
                    name: '',
                    SOC: '',
                    PCI: '',
                    ISO: '',
                    HIPAA: '',
                    FedRAMP_Moderate: '',
                    FedRAMP_High: '',
                }]
            }
        }
    })

</script>
<!--  Bootstrap-->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
        integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
        crossorigin="anonymous"></script>
</body>

</html>
